{"version":3,"sources":["node_modules/browser-pack/_prelude.js","app/js/app.js","node_modules/downloadjs/download.js"],"names":[],"mappings":"AAAA;;;AC0IA;;;;;;;;;;AAEA;IAEM,Y;;;AACF,0BAAyB;AAAA,QAAb,MAAa,uEAAJ,EAAI;;AAAA;;AACrB,SAAK,SAAL,GAAiB,MAAM,CAAC,SAAP,GAAmB,QAAQ,CAAC,aAAT,CAAuB,MAAM,CAAC,SAA9B,CAAnB,GAA8D,QAA/E;AACA,SAAK,WAAL,GAAoB,MAAM,CAAC,MAAP,IAAiB,MAAM,CAAC,MAAP,CAAc,MAAhC,GAA0C,MAAM,CAAC,MAAP,CAAc,MAAxD,GAAiE,EAApF;AACA,SAAK,WAAL,GAAoB,MAAM,CAAC,MAAP,IAAiB,MAAM,CAAC,MAAP,CAAc,MAAhC,GAA0C,MAAM,CAAC,MAAP,CAAc,MAAxD,GAAiE,EAApF;AACA,SAAK,QAAL,GAAgB,KAAhB;AACA,SAAK,UAAL,GAAkB,CAAlB;AAEA,SAAK,SAAL,GAAiB,IAAjB;AACA,SAAK,SAAL,GAAiB,EAAjB,CARqB,CASrB;;AAEA,SAAK,SAAL,GAAiB;AACb,MAAA,GAAG,EAAE;AADQ,KAAjB;AAKA,SAAK,IAAL;AACH;;;;oCAEe;AAAA;;AACZ,WAAK,SAAL,CAAe,OAAf,CAAuB,UAAA,IAAI,EAAI;AAC3B,YAAI,IAAJ;;AAEA,YAAI,IAAI,CAAC,EAAT,EAAa;AACT,UAAA,IAAI,GAAG,IAAI,CAAC,EAAZ;AACH,SAFD,MAEO,IAAI,IAAI,CAAC,SAAL,CAAe,KAAf,KAAyB,EAA7B,EAAiC;AACpC,UAAA,IAAI,GAAG,IAAI,CAAC,SAAL,CAAe,KAAtB;AACH,SAFM,MAEA;AACH,UAAA,IAAI,GAAG,KAAI,CAAC,UAAL,EAAP;AACH;;AAED,QAAA,KAAI,CAAC,SAAL,CAAe,KAAI,CAAC,WAAL,GAAmB,IAAnB,GAA0B,KAAI,CAAC,WAA/B,GAA6C,GAA7C,GAAmD,KAAI,CAAC,QAAvE,IAAmF,IAAI,CAAC,SAAxF;AACH,OAZD;AAaH;;;kCAEa;AACV,WAAK,IAAM,IAAX,IAAmB,KAAK,SAAxB,EAAmC;AAC/B,iCAAS,KAAK,SAAL,CAAe,IAAf,CAAT,EAA+B,IAA/B,EAAqC,KAAK,SAAL,CAAe,KAAK,QAApB,CAArC;AACH;AACJ;;;2BAEM;AACH,WAAK,SAAL,GAAiB,KAAK,SAAL,CAAe,gBAAf,CAAgC,KAAhC,CAAjB;AACA,MAAA,OAAO,CAAC,GAAR,CAAY,KAAK,SAAjB;;AAEA,WAAK,aAAL;;AAEA,WAAK,WAAL;AACH;;;;;;AAGL,MAAM,CAAC,YAAP,GAAsB,IAAI,YAAJ,CAAiB;AACnC;AACA,EAAA,MAAM,EAAE,CACJ;AACA;AAFI;AAF2B,CAAjB,CAAtB,C,CAQA;;;AC1MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../app.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","// function download(data, strFileName, strMimeType) {\r\n\r\n//     var self = window, // this script is only for browsers anyway...\r\n//         defaultMime = \"application/octet-stream\", // this default mime also triggers iframe downloads\r\n//         mimeType = strMimeType || defaultMime,\r\n//         payload = data,\r\n//         url = !strFileName && !strMimeType && payload,\r\n//         anchor = document.createElement(\"a\"),\r\n//         toString = function(a) { return String(a); },\r\n//         myBlob = (self.Blob || self.MozBlob || self.WebKitBlob || toString),\r\n//         fileName = strFileName || \"download\",\r\n//         blob,\r\n//         reader;\r\n//     myBlob = myBlob.call ? myBlob.bind(self) : Blob;\r\n\r\n//     if (String(this) === \"true\") { //reverse arguments, allowing download.bind(true, \"text/xml\", \"export.xml\") to act as a callback\r\n//         payload = [payload, mimeType];\r\n//         mimeType = payload[0];\r\n//         payload = payload[1];\r\n//     }\r\n\r\n\r\n//     if (url && url.length < 2048) { // if no filename and no mime, assume a url was passed as the only argument\r\n//         fileName = url.split(\"/\").pop().split(\"?\")[0];\r\n//         anchor.href = url; // assign href prop to temp anchor\r\n//         if (anchor.href.indexOf(url) !== -1) { // if the browser determines that it's a potentially valid url path:\r\n//             var ajax = new XMLHttpRequest();\r\n//             ajax.open(\"GET\", url, true);\r\n//             ajax.responseType = 'blob';\r\n//             ajax.onload = function(e) {\r\n//                 download(e.target.response, fileName, defaultMime);\r\n//             };\r\n//             setTimeout(function() { ajax.send(); }, 0); // allows setting custom ajax headers using the return:\r\n//             return ajax;\r\n//         } // end if valid url?\r\n//     } // end if url?\r\n\r\n\r\n//     //go ahead and download dataURLs right away\r\n//     if (/^data\\:[\\w+\\-]+\\/[\\w+\\-]+[,;]/.test(payload)) {\r\n\r\n//         if (payload.length > (1024 * 1024 * 1.999) && myBlob !== toString) {\r\n//             payload = dataUrlToBlob(payload);\r\n//             mimeType = payload.type || defaultMime;\r\n//         } else {\r\n//             return navigator.msSaveBlob ? // IE10 can't do a[download], only Blobs:\r\n//                 navigator.msSaveBlob(dataUrlToBlob(payload), fileName) :\r\n//                 saver(payload); // everyone else can save dataURLs un-processed\r\n//         }\r\n\r\n//     } //end if dataURL passed?\r\n\r\n//     blob = payload instanceof myBlob ?\r\n//         payload :\r\n//         new myBlob([payload], { type: mimeType });\r\n\r\n\r\n//     function dataUrlToBlob(strUrl) {\r\n//         var parts = strUrl.split(/[:;,]/),\r\n//             type = parts[1],\r\n//             decoder = parts[2] == \"base64\" ? atob : decodeURIComponent,\r\n//             binData = decoder(parts.pop()),\r\n//             mx = binData.length,\r\n//             i = 0,\r\n//             uiArr = new Uint8Array(mx);\r\n\r\n//         for (i; i < mx; ++i) uiArr[i] = binData.charCodeAt(i);\r\n\r\n//         return new myBlob([uiArr], { type: type });\r\n//     }\r\n\r\n//     function saver(url, winMode) {\r\n\r\n//         if ('download' in anchor) { //html5 A[download]\r\n//             anchor.href = url;\r\n//             anchor.setAttribute(\"download\", fileName);\r\n//             anchor.className = \"download-js-link\";\r\n//             anchor.innerHTML = \"downloading...\";\r\n//             anchor.style.display = \"none\";\r\n//             document.body.appendChild(anchor);\r\n//             setTimeout(function() {\r\n//                 anchor.click();\r\n//                 document.body.removeChild(anchor);\r\n//                 if (winMode === true) { setTimeout(function() { self.URL.revokeObjectURL(anchor.href); }, 250); }\r\n//             }, 66);\r\n//             return true;\r\n//         }\r\n\r\n//         // handle non-a[download] safari as best we can:\r\n//         if (/(Version)\\/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari\\//.test(navigator.userAgent)) {\r\n//             url = url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\r\n//             if (!window.open(url)) { // popup blocked, offer direct download:\r\n//                 if (confirm(\"Displaying New Document\\n\\nUse Save As... to download, then click back to return to this page.\")) { location.href = url; }\r\n//             }\r\n//             return true;\r\n//         }\r\n\r\n//         //do iframe dataURL download (old ch+FF):\r\n//         var f = document.createElement(\"iframe\");\r\n//         document.body.appendChild(f);\r\n\r\n//         if (!winMode) { // force a mime that will download:\r\n//             url = \"data:\" + url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\r\n//         }\r\n//         f.src = url;\r\n//         setTimeout(function() { document.body.removeChild(f); }, 333);\r\n\r\n//     } //end saver\r\n\r\n\r\n\r\n\r\n//     if (navigator.msSaveBlob) { // IE10+ : (has Blob, but not a[download] or URL)\r\n//         return navigator.msSaveBlob(blob, fileName);\r\n//     }\r\n\r\n//     if (self.URL) { // simple fast and modern way using Blob and URL:\r\n//         saver(self.URL.createObjectURL(blob), true);\r\n//     } else {\r\n//         // handle non-Blob()+non-URL browsers:\r\n//         if (typeof blob === \"string\" || blob.constructor === toString) {\r\n//             try {\r\n//                 return saver(\"data:\" + mimeType + \";base64,\" + self.btoa(blob));\r\n//             } catch (y) {\r\n//                 return saver(\"data:\" + mimeType + \",\" + encodeURIComponent(blob));\r\n//             }\r\n//         }\r\n\r\n//         // Blob but not URL support:\r\n//         reader = new FileReader();\r\n//         reader.onload = function(e) {\r\n//             saver(this.result);\r\n//         };\r\n//         reader.readAsDataURL(blob);\r\n//     }\r\n//     return true;\r\n// }; /* end download() */\r\n\r\nimport download from 'downloadjs';\r\n\r\n/////////////////////////////////////////////////////////\r\n\r\nclass SVGCollector {\r\n    constructor(params = {}) {\r\n        this.container = params.container ? document.querySelector(params.container) : document;\r\n        this.name_prefix = (params.rename && params.rename.prefix) ? params.rename.prefix : '';\r\n        this.name_suffix = (params.rename && params.rename.suffix) ? params.rename.suffix : '';\r\n        this.name_ext = 'svg';\r\n        this.name_index = 0;\r\n\r\n        this.svg_elems = null;\r\n        this.svg_items = {};\r\n        // this.svg_items = [];\r\n\r\n        this.mime_type = {\r\n            svg: 'image/svg+xml'\r\n        }\r\n\r\n\r\n        this.init();\r\n    }\r\n\r\n    _collectItems() {\r\n        this.svg_elems.forEach(elem => {\r\n            let name;\r\n\r\n            if (elem.id) {\r\n                name = elem.id;\r\n            } else if (elem.classList.value !== '') {\r\n                name = elem.classList.value;\r\n            } else {\r\n                name = this.name_index++;\r\n            }\r\n\r\n            this.svg_items[this.name_prefix + name + this.name_suffix + '.' + this.name_ext] = elem.outerHTML;\r\n        });\r\n    }\r\n\r\n    downloadAll() {\r\n        for (const item in this.svg_items) {\r\n            download(this.svg_items[item], item, this.mime_type[this.name_ext])\r\n        }\r\n    }\r\n\r\n    init() {\r\n        this.svg_elems = this.container.querySelectorAll('svg');\r\n        console.log(this.svg_elems);\r\n\r\n        this._collectItems();\r\n\r\n        this.downloadAll();\r\n    }\r\n}\r\n\r\nwindow.svgCollector = new SVGCollector({\r\n    // container: '.item.first',\r\n    rename: {\r\n        // prefix: 'pref_',\r\n        // suffix: '_suf'\r\n    }\r\n});\r\n\r\n// console.log(svgCollector);","//download.js v4.2, by dandavis; 2008-2016. [MIT] see http://danml.com/download.html for tests/usage\n// v1 landed a FF+Chrome compat way of downloading strings to local un-named files, upgraded to use a hidden frame and optional mime\n// v2 added named files via a[download], msSaveBlob, IE (10+) support, and window.URL support for larger+faster saves than dataURLs\n// v3 added dataURL and Blob Input, bind-toggle arity, and legacy dataURL fallback was improved with force-download mime and base64 support. 3.1 improved safari handling.\n// v4 adds AMD/UMD, commonJS, and plain browser support\n// v4.1 adds url download capability via solo URL argument (same domain/CORS only)\n// v4.2 adds semantic variable names, long (over 2MB) dataURL support, and hidden by default temp anchors\n// https://github.com/rndme/download\n\n(function (root, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine([], factory);\n\t} else if (typeof exports === 'object') {\n\t\t// Node. Does not work with strict CommonJS, but\n\t\t// only CommonJS-like environments that support module.exports,\n\t\t// like Node.\n\t\tmodule.exports = factory();\n\t} else {\n\t\t// Browser globals (root is window)\n\t\troot.download = factory();\n  }\n}(this, function () {\n\n\treturn function download(data, strFileName, strMimeType) {\n\n\t\tvar self = window, // this script is only for browsers anyway...\n\t\t\tdefaultMime = \"application/octet-stream\", // this default mime also triggers iframe downloads\n\t\t\tmimeType = strMimeType || defaultMime,\n\t\t\tpayload = data,\n\t\t\turl = !strFileName && !strMimeType && payload,\n\t\t\tanchor = document.createElement(\"a\"),\n\t\t\ttoString = function(a){return String(a);},\n\t\t\tmyBlob = (self.Blob || self.MozBlob || self.WebKitBlob || toString),\n\t\t\tfileName = strFileName || \"download\",\n\t\t\tblob,\n\t\t\treader;\n\t\t\tmyBlob= myBlob.call ? myBlob.bind(self) : Blob ;\n\t  \n\t\tif(String(this)===\"true\"){ //reverse arguments, allowing download.bind(true, \"text/xml\", \"export.xml\") to act as a callback\n\t\t\tpayload=[payload, mimeType];\n\t\t\tmimeType=payload[0];\n\t\t\tpayload=payload[1];\n\t\t}\n\n\n\t\tif(url && url.length< 2048){ // if no filename and no mime, assume a url was passed as the only argument\n\t\t\tfileName = url.split(\"/\").pop().split(\"?\")[0];\n\t\t\tanchor.href = url; // assign href prop to temp anchor\n\t\t  \tif(anchor.href.indexOf(url) !== -1){ // if the browser determines that it's a potentially valid url path:\n        \t\tvar ajax=new XMLHttpRequest();\n        \t\tajax.open( \"GET\", url, true);\n        \t\tajax.responseType = 'blob';\n        \t\tajax.onload= function(e){ \n\t\t\t\t  download(e.target.response, fileName, defaultMime);\n\t\t\t\t};\n        \t\tsetTimeout(function(){ ajax.send();}, 0); // allows setting custom ajax headers using the return:\n\t\t\t    return ajax;\n\t\t\t} // end if valid url?\n\t\t} // end if url?\n\n\n\t\t//go ahead and download dataURLs right away\n\t\tif(/^data:([\\w+-]+\\/[\\w+.-]+)?[,;]/.test(payload)){\n\t\t\n\t\t\tif(payload.length > (1024*1024*1.999) && myBlob !== toString ){\n\t\t\t\tpayload=dataUrlToBlob(payload);\n\t\t\t\tmimeType=payload.type || defaultMime;\n\t\t\t}else{\t\t\t\n\t\t\t\treturn navigator.msSaveBlob ?  // IE10 can't do a[download], only Blobs:\n\t\t\t\t\tnavigator.msSaveBlob(dataUrlToBlob(payload), fileName) :\n\t\t\t\t\tsaver(payload) ; // everyone else can save dataURLs un-processed\n\t\t\t}\n\t\t\t\n\t\t}else{//not data url, is it a string with special needs?\n\t\t\tif(/([\\x80-\\xff])/.test(payload)){\t\t\t  \n\t\t\t\tvar i=0, tempUiArr= new Uint8Array(payload.length), mx=tempUiArr.length;\n\t\t\t\tfor(i;i<mx;++i) tempUiArr[i]= payload.charCodeAt(i);\n\t\t\t \tpayload=new myBlob([tempUiArr], {type: mimeType});\n\t\t\t}\t\t  \n\t\t}\n\t\tblob = payload instanceof myBlob ?\n\t\t\tpayload :\n\t\t\tnew myBlob([payload], {type: mimeType}) ;\n\n\n\t\tfunction dataUrlToBlob(strUrl) {\n\t\t\tvar parts= strUrl.split(/[:;,]/),\n\t\t\ttype= parts[1],\n\t\t\tdecoder= parts[2] == \"base64\" ? atob : decodeURIComponent,\n\t\t\tbinData= decoder( parts.pop() ),\n\t\t\tmx= binData.length,\n\t\t\ti= 0,\n\t\t\tuiArr= new Uint8Array(mx);\n\n\t\t\tfor(i;i<mx;++i) uiArr[i]= binData.charCodeAt(i);\n\n\t\t\treturn new myBlob([uiArr], {type: type});\n\t\t }\n\n\t\tfunction saver(url, winMode){\n\n\t\t\tif ('download' in anchor) { //html5 A[download]\n\t\t\t\tanchor.href = url;\n\t\t\t\tanchor.setAttribute(\"download\", fileName);\n\t\t\t\tanchor.className = \"download-js-link\";\n\t\t\t\tanchor.innerHTML = \"downloading...\";\n\t\t\t\tanchor.style.display = \"none\";\n\t\t\t\tdocument.body.appendChild(anchor);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tanchor.click();\n\t\t\t\t\tdocument.body.removeChild(anchor);\n\t\t\t\t\tif(winMode===true){setTimeout(function(){ self.URL.revokeObjectURL(anchor.href);}, 250 );}\n\t\t\t\t}, 66);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// handle non-a[download] safari as best we can:\n\t\t\tif(/(Version)\\/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari\\//.test(navigator.userAgent)) {\n\t\t\t\tif(/^data:/.test(url))\turl=\"data:\"+url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t\t\tif(!window.open(url)){ // popup blocked, offer direct download:\n\t\t\t\t\tif(confirm(\"Displaying New Document\\n\\nUse Save As... to download, then click back to return to this page.\")){ location.href=url; }\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t//do iframe dataURL download (old ch+FF):\n\t\t\tvar f = document.createElement(\"iframe\");\n\t\t\tdocument.body.appendChild(f);\n\n\t\t\tif(!winMode && /^data:/.test(url)){ // force a mime that will download:\n\t\t\t\turl=\"data:\"+url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t\t}\n\t\t\tf.src=url;\n\t\t\tsetTimeout(function(){ document.body.removeChild(f); }, 333);\n\n\t\t}//end saver\n\n\n\n\n\t\tif (navigator.msSaveBlob) { // IE10+ : (has Blob, but not a[download] or URL)\n\t\t\treturn navigator.msSaveBlob(blob, fileName);\n\t\t}\n\n\t\tif(self.URL){ // simple fast and modern way using Blob and URL:\n\t\t\tsaver(self.URL.createObjectURL(blob), true);\n\t\t}else{\n\t\t\t// handle non-Blob()+non-URL browsers:\n\t\t\tif(typeof blob === \"string\" || blob.constructor===toString ){\n\t\t\t\ttry{\n\t\t\t\t\treturn saver( \"data:\" +  mimeType   + \";base64,\"  +  self.btoa(blob)  );\n\t\t\t\t}catch(y){\n\t\t\t\t\treturn saver( \"data:\" +  mimeType   + \",\" + encodeURIComponent(blob)  );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Blob but not URL support:\n\t\t\treader=new FileReader();\n\t\t\treader.onload=function(e){\n\t\t\t\tsaver(this.result);\n\t\t\t};\n\t\t\treader.readAsDataURL(blob);\n\t\t}\n\t\treturn true;\n\t}; /* end download() */\n}));\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhcHAvanMvYXBwLmpzIiwibm9kZV9tb2R1bGVzL2Rvd25sb2FkanMvZG93bmxvYWQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQzBJQTs7Ozs7Ozs7OztBQUVBO0lBRU0sWTs7O0FBQ0YsMEJBQXlCO0FBQUEsUUFBYixNQUFhLHVFQUFKLEVBQUk7O0FBQUE7O0FBQ3JCLFNBQUssU0FBTCxHQUFpQixNQUFNLENBQUMsU0FBUCxHQUFtQixRQUFRLENBQUMsYUFBVCxDQUF1QixNQUFNLENBQUMsU0FBOUIsQ0FBbkIsR0FBOEQsUUFBL0U7QUFDQSxTQUFLLFdBQUwsR0FBb0IsTUFBTSxDQUFDLE1BQVAsSUFBaUIsTUFBTSxDQUFDLE1BQVAsQ0FBYyxNQUFoQyxHQUEwQyxNQUFNLENBQUMsTUFBUCxDQUFjLE1BQXhELEdBQWlFLEVBQXBGO0FBQ0EsU0FBSyxXQUFMLEdBQW9CLE1BQU0sQ0FBQyxNQUFQLElBQWlCLE1BQU0sQ0FBQyxNQUFQLENBQWMsTUFBaEMsR0FBMEMsTUFBTSxDQUFDLE1BQVAsQ0FBYyxNQUF4RCxHQUFpRSxFQUFwRjtBQUNBLFNBQUssUUFBTCxHQUFnQixLQUFoQjtBQUNBLFNBQUssVUFBTCxHQUFrQixDQUFsQjtBQUVBLFNBQUssU0FBTCxHQUFpQixJQUFqQjtBQUNBLFNBQUssU0FBTCxHQUFpQixFQUFqQixDQVJxQixDQVNyQjs7QUFFQSxTQUFLLFNBQUwsR0FBaUI7QUFDYixNQUFBLEdBQUcsRUFBRTtBQURRLEtBQWpCO0FBS0EsU0FBSyxJQUFMO0FBQ0g7Ozs7b0NBRWU7QUFBQTs7QUFDWixXQUFLLFNBQUwsQ0FBZSxPQUFmLENBQXVCLFVBQUEsSUFBSSxFQUFJO0FBQzNCLFlBQUksSUFBSjs7QUFFQSxZQUFJLElBQUksQ0FBQyxFQUFULEVBQWE7QUFDVCxVQUFBLElBQUksR0FBRyxJQUFJLENBQUMsRUFBWjtBQUNILFNBRkQsTUFFTyxJQUFJLElBQUksQ0FBQyxTQUFMLENBQWUsS0FBZixLQUF5QixFQUE3QixFQUFpQztBQUNwQyxVQUFBLElBQUksR0FBRyxJQUFJLENBQUMsU0FBTCxDQUFlLEtBQXRCO0FBQ0gsU0FGTSxNQUVBO0FBQ0gsVUFBQSxJQUFJLEdBQUcsS0FBSSxDQUFDLFVBQUwsRUFBUDtBQUNIOztBQUVELFFBQUEsS0FBSSxDQUFDLFNBQUwsQ0FBZSxLQUFJLENBQUMsV0FBTCxHQUFtQixJQUFuQixHQUEwQixLQUFJLENBQUMsV0FBL0IsR0FBNkMsR0FBN0MsR0FBbUQsS0FBSSxDQUFDLFFBQXZFLElBQW1GLElBQUksQ0FBQyxTQUF4RjtBQUNILE9BWkQ7QUFhSDs7O2tDQUVhO0FBQ1YsV0FBSyxJQUFNLElBQVgsSUFBbUIsS0FBSyxTQUF4QixFQUFtQztBQUMvQixpQ0FBUyxLQUFLLFNBQUwsQ0FBZSxJQUFmLENBQVQsRUFBK0IsSUFBL0IsRUFBcUMsS0FBSyxTQUFMLENBQWUsS0FBSyxRQUFwQixDQUFyQztBQUNIO0FBQ0o7OzsyQkFFTTtBQUNILFdBQUssU0FBTCxHQUFpQixLQUFLLFNBQUwsQ0FBZSxnQkFBZixDQUFnQyxLQUFoQyxDQUFqQjtBQUNBLE1BQUEsT0FBTyxDQUFDLEdBQVIsQ0FBWSxLQUFLLFNBQWpCOztBQUVBLFdBQUssYUFBTDs7QUFFQSxXQUFLLFdBQUw7QUFDSDs7Ozs7O0FBR0wsTUFBTSxDQUFDLFlBQVAsR0FBc0IsSUFBSSxZQUFKLENBQWlCO0FBQ25DO0FBQ0EsRUFBQSxNQUFNLEVBQUUsQ0FDSjtBQUNBO0FBRkk7QUFGMkIsQ0FBakIsQ0FBdEIsQyxDQVFBOzs7QUMxTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLy8gZnVuY3Rpb24gZG93bmxvYWQoZGF0YSwgc3RyRmlsZU5hbWUsIHN0ck1pbWVUeXBlKSB7XHJcblxyXG4vLyAgICAgdmFyIHNlbGYgPSB3aW5kb3csIC8vIHRoaXMgc2NyaXB0IGlzIG9ubHkgZm9yIGJyb3dzZXJzIGFueXdheS4uLlxyXG4vLyAgICAgICAgIGRlZmF1bHRNaW1lID0gXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIiwgLy8gdGhpcyBkZWZhdWx0IG1pbWUgYWxzbyB0cmlnZ2VycyBpZnJhbWUgZG93bmxvYWRzXHJcbi8vICAgICAgICAgbWltZVR5cGUgPSBzdHJNaW1lVHlwZSB8fCBkZWZhdWx0TWltZSxcclxuLy8gICAgICAgICBwYXlsb2FkID0gZGF0YSxcclxuLy8gICAgICAgICB1cmwgPSAhc3RyRmlsZU5hbWUgJiYgIXN0ck1pbWVUeXBlICYmIHBheWxvYWQsXHJcbi8vICAgICAgICAgYW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIiksXHJcbi8vICAgICAgICAgdG9TdHJpbmcgPSBmdW5jdGlvbihhKSB7IHJldHVybiBTdHJpbmcoYSk7IH0sXHJcbi8vICAgICAgICAgbXlCbG9iID0gKHNlbGYuQmxvYiB8fCBzZWxmLk1vekJsb2IgfHwgc2VsZi5XZWJLaXRCbG9iIHx8IHRvU3RyaW5nKSxcclxuLy8gICAgICAgICBmaWxlTmFtZSA9IHN0ckZpbGVOYW1lIHx8IFwiZG93bmxvYWRcIixcclxuLy8gICAgICAgICBibG9iLFxyXG4vLyAgICAgICAgIHJlYWRlcjtcclxuLy8gICAgIG15QmxvYiA9IG15QmxvYi5jYWxsID8gbXlCbG9iLmJpbmQoc2VsZikgOiBCbG9iO1xyXG5cclxuLy8gICAgIGlmIChTdHJpbmcodGhpcykgPT09IFwidHJ1ZVwiKSB7IC8vcmV2ZXJzZSBhcmd1bWVudHMsIGFsbG93aW5nIGRvd25sb2FkLmJpbmQodHJ1ZSwgXCJ0ZXh0L3htbFwiLCBcImV4cG9ydC54bWxcIikgdG8gYWN0IGFzIGEgY2FsbGJhY2tcclxuLy8gICAgICAgICBwYXlsb2FkID0gW3BheWxvYWQsIG1pbWVUeXBlXTtcclxuLy8gICAgICAgICBtaW1lVHlwZSA9IHBheWxvYWRbMF07XHJcbi8vICAgICAgICAgcGF5bG9hZCA9IHBheWxvYWRbMV07XHJcbi8vICAgICB9XHJcblxyXG5cclxuLy8gICAgIGlmICh1cmwgJiYgdXJsLmxlbmd0aCA8IDIwNDgpIHsgLy8gaWYgbm8gZmlsZW5hbWUgYW5kIG5vIG1pbWUsIGFzc3VtZSBhIHVybCB3YXMgcGFzc2VkIGFzIHRoZSBvbmx5IGFyZ3VtZW50XHJcbi8vICAgICAgICAgZmlsZU5hbWUgPSB1cmwuc3BsaXQoXCIvXCIpLnBvcCgpLnNwbGl0KFwiP1wiKVswXTtcclxuLy8gICAgICAgICBhbmNob3IuaHJlZiA9IHVybDsgLy8gYXNzaWduIGhyZWYgcHJvcCB0byB0ZW1wIGFuY2hvclxyXG4vLyAgICAgICAgIGlmIChhbmNob3IuaHJlZi5pbmRleE9mKHVybCkgIT09IC0xKSB7IC8vIGlmIHRoZSBicm93c2VyIGRldGVybWluZXMgdGhhdCBpdCdzIGEgcG90ZW50aWFsbHkgdmFsaWQgdXJsIHBhdGg6XHJcbi8vICAgICAgICAgICAgIHZhciBhamF4ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbi8vICAgICAgICAgICAgIGFqYXgub3BlbihcIkdFVFwiLCB1cmwsIHRydWUpO1xyXG4vLyAgICAgICAgICAgICBhamF4LnJlc3BvbnNlVHlwZSA9ICdibG9iJztcclxuLy8gICAgICAgICAgICAgYWpheC5vbmxvYWQgPSBmdW5jdGlvbihlKSB7XHJcbi8vICAgICAgICAgICAgICAgICBkb3dubG9hZChlLnRhcmdldC5yZXNwb25zZSwgZmlsZU5hbWUsIGRlZmF1bHRNaW1lKTtcclxuLy8gICAgICAgICAgICAgfTtcclxuLy8gICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgYWpheC5zZW5kKCk7IH0sIDApOyAvLyBhbGxvd3Mgc2V0dGluZyBjdXN0b20gYWpheCBoZWFkZXJzIHVzaW5nIHRoZSByZXR1cm46XHJcbi8vICAgICAgICAgICAgIHJldHVybiBhamF4O1xyXG4vLyAgICAgICAgIH0gLy8gZW5kIGlmIHZhbGlkIHVybD9cclxuLy8gICAgIH0gLy8gZW5kIGlmIHVybD9cclxuXHJcblxyXG4vLyAgICAgLy9nbyBhaGVhZCBhbmQgZG93bmxvYWQgZGF0YVVSTHMgcmlnaHQgYXdheVxyXG4vLyAgICAgaWYgKC9eZGF0YVxcOltcXHcrXFwtXStcXC9bXFx3K1xcLV0rWyw7XS8udGVzdChwYXlsb2FkKSkge1xyXG5cclxuLy8gICAgICAgICBpZiAocGF5bG9hZC5sZW5ndGggPiAoMTAyNCAqIDEwMjQgKiAxLjk5OSkgJiYgbXlCbG9iICE9PSB0b1N0cmluZykge1xyXG4vLyAgICAgICAgICAgICBwYXlsb2FkID0gZGF0YVVybFRvQmxvYihwYXlsb2FkKTtcclxuLy8gICAgICAgICAgICAgbWltZVR5cGUgPSBwYXlsb2FkLnR5cGUgfHwgZGVmYXVsdE1pbWU7XHJcbi8vICAgICAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5tc1NhdmVCbG9iID8gLy8gSUUxMCBjYW4ndCBkbyBhW2Rvd25sb2FkXSwgb25seSBCbG9iczpcclxuLy8gICAgICAgICAgICAgICAgIG5hdmlnYXRvci5tc1NhdmVCbG9iKGRhdGFVcmxUb0Jsb2IocGF5bG9hZCksIGZpbGVOYW1lKSA6XHJcbi8vICAgICAgICAgICAgICAgICBzYXZlcihwYXlsb2FkKTsgLy8gZXZlcnlvbmUgZWxzZSBjYW4gc2F2ZSBkYXRhVVJMcyB1bi1wcm9jZXNzZWRcclxuLy8gICAgICAgICB9XHJcblxyXG4vLyAgICAgfSAvL2VuZCBpZiBkYXRhVVJMIHBhc3NlZD9cclxuXHJcbi8vICAgICBibG9iID0gcGF5bG9hZCBpbnN0YW5jZW9mIG15QmxvYiA/XHJcbi8vICAgICAgICAgcGF5bG9hZCA6XHJcbi8vICAgICAgICAgbmV3IG15QmxvYihbcGF5bG9hZF0sIHsgdHlwZTogbWltZVR5cGUgfSk7XHJcblxyXG5cclxuLy8gICAgIGZ1bmN0aW9uIGRhdGFVcmxUb0Jsb2Ioc3RyVXJsKSB7XHJcbi8vICAgICAgICAgdmFyIHBhcnRzID0gc3RyVXJsLnNwbGl0KC9bOjssXS8pLFxyXG4vLyAgICAgICAgICAgICB0eXBlID0gcGFydHNbMV0sXHJcbi8vICAgICAgICAgICAgIGRlY29kZXIgPSBwYXJ0c1syXSA9PSBcImJhc2U2NFwiID8gYXRvYiA6IGRlY29kZVVSSUNvbXBvbmVudCxcclxuLy8gICAgICAgICAgICAgYmluRGF0YSA9IGRlY29kZXIocGFydHMucG9wKCkpLFxyXG4vLyAgICAgICAgICAgICBteCA9IGJpbkRhdGEubGVuZ3RoLFxyXG4vLyAgICAgICAgICAgICBpID0gMCxcclxuLy8gICAgICAgICAgICAgdWlBcnIgPSBuZXcgVWludDhBcnJheShteCk7XHJcblxyXG4vLyAgICAgICAgIGZvciAoaTsgaSA8IG14OyArK2kpIHVpQXJyW2ldID0gYmluRGF0YS5jaGFyQ29kZUF0KGkpO1xyXG5cclxuLy8gICAgICAgICByZXR1cm4gbmV3IG15QmxvYihbdWlBcnJdLCB7IHR5cGU6IHR5cGUgfSk7XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgZnVuY3Rpb24gc2F2ZXIodXJsLCB3aW5Nb2RlKSB7XHJcblxyXG4vLyAgICAgICAgIGlmICgnZG93bmxvYWQnIGluIGFuY2hvcikgeyAvL2h0bWw1IEFbZG93bmxvYWRdXHJcbi8vICAgICAgICAgICAgIGFuY2hvci5ocmVmID0gdXJsO1xyXG4vLyAgICAgICAgICAgICBhbmNob3Iuc2V0QXR0cmlidXRlKFwiZG93bmxvYWRcIiwgZmlsZU5hbWUpO1xyXG4vLyAgICAgICAgICAgICBhbmNob3IuY2xhc3NOYW1lID0gXCJkb3dubG9hZC1qcy1saW5rXCI7XHJcbi8vICAgICAgICAgICAgIGFuY2hvci5pbm5lckhUTUwgPSBcImRvd25sb2FkaW5nLi4uXCI7XHJcbi8vICAgICAgICAgICAgIGFuY2hvci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbi8vICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYW5jaG9yKTtcclxuLy8gICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuLy8gICAgICAgICAgICAgICAgIGFuY2hvci5jbGljaygpO1xyXG4vLyAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhbmNob3IpO1xyXG4vLyAgICAgICAgICAgICAgICAgaWYgKHdpbk1vZGUgPT09IHRydWUpIHsgc2V0VGltZW91dChmdW5jdGlvbigpIHsgc2VsZi5VUkwucmV2b2tlT2JqZWN0VVJMKGFuY2hvci5ocmVmKTsgfSwgMjUwKTsgfVxyXG4vLyAgICAgICAgICAgICB9LCA2Nik7XHJcbi8vICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4vLyAgICAgICAgIH1cclxuXHJcbi8vICAgICAgICAgLy8gaGFuZGxlIG5vbi1hW2Rvd25sb2FkXSBzYWZhcmkgYXMgYmVzdCB3ZSBjYW46XHJcbi8vICAgICAgICAgaWYgKC8oVmVyc2lvbilcXC8oXFxkKylcXC4oXFxkKykoPzpcXC4oXFxkKykpPy4qU2FmYXJpXFwvLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7XHJcbi8vICAgICAgICAgICAgIHVybCA9IHVybC5yZXBsYWNlKC9eZGF0YTooW1xcd1xcL1xcLVxcK10rKS8sIGRlZmF1bHRNaW1lKTtcclxuLy8gICAgICAgICAgICAgaWYgKCF3aW5kb3cub3Blbih1cmwpKSB7IC8vIHBvcHVwIGJsb2NrZWQsIG9mZmVyIGRpcmVjdCBkb3dubG9hZDpcclxuLy8gICAgICAgICAgICAgICAgIGlmIChjb25maXJtKFwiRGlzcGxheWluZyBOZXcgRG9jdW1lbnRcXG5cXG5Vc2UgU2F2ZSBBcy4uLiB0byBkb3dubG9hZCwgdGhlbiBjbGljayBiYWNrIHRvIHJldHVybiB0byB0aGlzIHBhZ2UuXCIpKSB7IGxvY2F0aW9uLmhyZWYgPSB1cmw7IH1cclxuLy8gICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuLy8gICAgICAgICB9XHJcblxyXG4vLyAgICAgICAgIC8vZG8gaWZyYW1lIGRhdGFVUkwgZG93bmxvYWQgKG9sZCBjaCtGRik6XHJcbi8vICAgICAgICAgdmFyIGYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO1xyXG4vLyAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZik7XHJcblxyXG4vLyAgICAgICAgIGlmICghd2luTW9kZSkgeyAvLyBmb3JjZSBhIG1pbWUgdGhhdCB3aWxsIGRvd25sb2FkOlxyXG4vLyAgICAgICAgICAgICB1cmwgPSBcImRhdGE6XCIgKyB1cmwucmVwbGFjZSgvXmRhdGE6KFtcXHdcXC9cXC1cXCtdKykvLCBkZWZhdWx0TWltZSk7XHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgICAgIGYuc3JjID0gdXJsO1xyXG4vLyAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZik7IH0sIDMzMyk7XHJcblxyXG4vLyAgICAgfSAvL2VuZCBzYXZlclxyXG5cclxuXHJcblxyXG5cclxuLy8gICAgIGlmIChuYXZpZ2F0b3IubXNTYXZlQmxvYikgeyAvLyBJRTEwKyA6IChoYXMgQmxvYiwgYnV0IG5vdCBhW2Rvd25sb2FkXSBvciBVUkwpXHJcbi8vICAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5tc1NhdmVCbG9iKGJsb2IsIGZpbGVOYW1lKTtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBpZiAoc2VsZi5VUkwpIHsgLy8gc2ltcGxlIGZhc3QgYW5kIG1vZGVybiB3YXkgdXNpbmcgQmxvYiBhbmQgVVJMOlxyXG4vLyAgICAgICAgIHNhdmVyKHNlbGYuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKSwgdHJ1ZSk7XHJcbi8vICAgICB9IGVsc2Uge1xyXG4vLyAgICAgICAgIC8vIGhhbmRsZSBub24tQmxvYigpK25vbi1VUkwgYnJvd3NlcnM6XHJcbi8vICAgICAgICAgaWYgKHR5cGVvZiBibG9iID09PSBcInN0cmluZ1wiIHx8IGJsb2IuY29uc3RydWN0b3IgPT09IHRvU3RyaW5nKSB7XHJcbi8vICAgICAgICAgICAgIHRyeSB7XHJcbi8vICAgICAgICAgICAgICAgICByZXR1cm4gc2F2ZXIoXCJkYXRhOlwiICsgbWltZVR5cGUgKyBcIjtiYXNlNjQsXCIgKyBzZWxmLmJ0b2EoYmxvYikpO1xyXG4vLyAgICAgICAgICAgICB9IGNhdGNoICh5KSB7XHJcbi8vICAgICAgICAgICAgICAgICByZXR1cm4gc2F2ZXIoXCJkYXRhOlwiICsgbWltZVR5cGUgKyBcIixcIiArIGVuY29kZVVSSUNvbXBvbmVudChibG9iKSk7XHJcbi8vICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICB9XHJcblxyXG4vLyAgICAgICAgIC8vIEJsb2IgYnV0IG5vdCBVUkwgc3VwcG9ydDpcclxuLy8gICAgICAgICByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4vLyAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKSB7XHJcbi8vICAgICAgICAgICAgIHNhdmVyKHRoaXMucmVzdWx0KTtcclxuLy8gICAgICAgICB9O1xyXG4vLyAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpO1xyXG4vLyAgICAgfVxyXG4vLyAgICAgcmV0dXJuIHRydWU7XHJcbi8vIH07IC8qIGVuZCBkb3dubG9hZCgpICovXHJcblxyXG5pbXBvcnQgZG93bmxvYWQgZnJvbSAnZG93bmxvYWRqcyc7XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmNsYXNzIFNWR0NvbGxlY3RvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMgPSB7fSkge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gcGFyYW1zLmNvbnRhaW5lciA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocGFyYW1zLmNvbnRhaW5lcikgOiBkb2N1bWVudDtcclxuICAgICAgICB0aGlzLm5hbWVfcHJlZml4ID0gKHBhcmFtcy5yZW5hbWUgJiYgcGFyYW1zLnJlbmFtZS5wcmVmaXgpID8gcGFyYW1zLnJlbmFtZS5wcmVmaXggOiAnJztcclxuICAgICAgICB0aGlzLm5hbWVfc3VmZml4ID0gKHBhcmFtcy5yZW5hbWUgJiYgcGFyYW1zLnJlbmFtZS5zdWZmaXgpID8gcGFyYW1zLnJlbmFtZS5zdWZmaXggOiAnJztcclxuICAgICAgICB0aGlzLm5hbWVfZXh0ID0gJ3N2Zyc7XHJcbiAgICAgICAgdGhpcy5uYW1lX2luZGV4ID0gMDtcclxuXHJcbiAgICAgICAgdGhpcy5zdmdfZWxlbXMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc3ZnX2l0ZW1zID0ge307XHJcbiAgICAgICAgLy8gdGhpcy5zdmdfaXRlbXMgPSBbXTtcclxuXHJcbiAgICAgICAgdGhpcy5taW1lX3R5cGUgPSB7XHJcbiAgICAgICAgICAgIHN2ZzogJ2ltYWdlL3N2Zyt4bWwnXHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgX2NvbGxlY3RJdGVtcygpIHtcclxuICAgICAgICB0aGlzLnN2Z19lbGVtcy5mb3JFYWNoKGVsZW0gPT4ge1xyXG4gICAgICAgICAgICBsZXQgbmFtZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChlbGVtLmlkKSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lID0gZWxlbS5pZDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtLmNsYXNzTGlzdC52YWx1ZSAhPT0gJycpIHtcclxuICAgICAgICAgICAgICAgIG5hbWUgPSBlbGVtLmNsYXNzTGlzdC52YWx1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5hbWUgPSB0aGlzLm5hbWVfaW5kZXgrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zdmdfaXRlbXNbdGhpcy5uYW1lX3ByZWZpeCArIG5hbWUgKyB0aGlzLm5hbWVfc3VmZml4ICsgJy4nICsgdGhpcy5uYW1lX2V4dF0gPSBlbGVtLm91dGVySFRNTDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkb3dubG9hZEFsbCgpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gaW4gdGhpcy5zdmdfaXRlbXMpIHtcclxuICAgICAgICAgICAgZG93bmxvYWQodGhpcy5zdmdfaXRlbXNbaXRlbV0sIGl0ZW0sIHRoaXMubWltZV90eXBlW3RoaXMubmFtZV9leHRdKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHRoaXMuc3ZnX2VsZW1zID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnc3ZnJyk7XHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5zdmdfZWxlbXMpO1xyXG5cclxuICAgICAgICB0aGlzLl9jb2xsZWN0SXRlbXMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5kb3dubG9hZEFsbCgpO1xyXG4gICAgfVxyXG59XHJcblxyXG53aW5kb3cuc3ZnQ29sbGVjdG9yID0gbmV3IFNWR0NvbGxlY3Rvcih7XHJcbiAgICAvLyBjb250YWluZXI6ICcuaXRlbS5maXJzdCcsXHJcbiAgICByZW5hbWU6IHtcclxuICAgICAgICAvLyBwcmVmaXg6ICdwcmVmXycsXHJcbiAgICAgICAgLy8gc3VmZml4OiAnX3N1ZidcclxuICAgIH1cclxufSk7XHJcblxyXG4vLyBjb25zb2xlLmxvZyhzdmdDb2xsZWN0b3IpOyIsIi8vZG93bmxvYWQuanMgdjQuMiwgYnkgZGFuZGF2aXM7IDIwMDgtMjAxNi4gW01JVF0gc2VlIGh0dHA6Ly9kYW5tbC5jb20vZG93bmxvYWQuaHRtbCBmb3IgdGVzdHMvdXNhZ2Vcbi8vIHYxIGxhbmRlZCBhIEZGK0Nocm9tZSBjb21wYXQgd2F5IG9mIGRvd25sb2FkaW5nIHN0cmluZ3MgdG8gbG9jYWwgdW4tbmFtZWQgZmlsZXMsIHVwZ3JhZGVkIHRvIHVzZSBhIGhpZGRlbiBmcmFtZSBhbmQgb3B0aW9uYWwgbWltZVxuLy8gdjIgYWRkZWQgbmFtZWQgZmlsZXMgdmlhIGFbZG93bmxvYWRdLCBtc1NhdmVCbG9iLCBJRSAoMTArKSBzdXBwb3J0LCBhbmQgd2luZG93LlVSTCBzdXBwb3J0IGZvciBsYXJnZXIrZmFzdGVyIHNhdmVzIHRoYW4gZGF0YVVSTHNcbi8vIHYzIGFkZGVkIGRhdGFVUkwgYW5kIEJsb2IgSW5wdXQsIGJpbmQtdG9nZ2xlIGFyaXR5LCBhbmQgbGVnYWN5IGRhdGFVUkwgZmFsbGJhY2sgd2FzIGltcHJvdmVkIHdpdGggZm9yY2UtZG93bmxvYWQgbWltZSBhbmQgYmFzZTY0IHN1cHBvcnQuIDMuMSBpbXByb3ZlZCBzYWZhcmkgaGFuZGxpbmcuXG4vLyB2NCBhZGRzIEFNRC9VTUQsIGNvbW1vbkpTLCBhbmQgcGxhaW4gYnJvd3NlciBzdXBwb3J0XG4vLyB2NC4xIGFkZHMgdXJsIGRvd25sb2FkIGNhcGFiaWxpdHkgdmlhIHNvbG8gVVJMIGFyZ3VtZW50IChzYW1lIGRvbWFpbi9DT1JTIG9ubHkpXG4vLyB2NC4yIGFkZHMgc2VtYW50aWMgdmFyaWFibGUgbmFtZXMsIGxvbmcgKG92ZXIgMk1CKSBkYXRhVVJMIHN1cHBvcnQsIGFuZCBoaWRkZW4gYnkgZGVmYXVsdCB0ZW1wIGFuY2hvcnNcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ybmRtZS9kb3dubG9hZFxuXG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuXHRcdC8vIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dFxuXHRcdC8vIG9ubHkgQ29tbW9uSlMtbGlrZSBlbnZpcm9ubWVudHMgdGhhdCBzdXBwb3J0IG1vZHVsZS5leHBvcnRzLFxuXHRcdC8vIGxpa2UgTm9kZS5cblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0fSBlbHNlIHtcblx0XHQvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KVxuXHRcdHJvb3QuZG93bmxvYWQgPSBmYWN0b3J5KCk7XG4gIH1cbn0odGhpcywgZnVuY3Rpb24gKCkge1xuXG5cdHJldHVybiBmdW5jdGlvbiBkb3dubG9hZChkYXRhLCBzdHJGaWxlTmFtZSwgc3RyTWltZVR5cGUpIHtcblxuXHRcdHZhciBzZWxmID0gd2luZG93LCAvLyB0aGlzIHNjcmlwdCBpcyBvbmx5IGZvciBicm93c2VycyBhbnl3YXkuLi5cblx0XHRcdGRlZmF1bHRNaW1lID0gXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIiwgLy8gdGhpcyBkZWZhdWx0IG1pbWUgYWxzbyB0cmlnZ2VycyBpZnJhbWUgZG93bmxvYWRzXG5cdFx0XHRtaW1lVHlwZSA9IHN0ck1pbWVUeXBlIHx8IGRlZmF1bHRNaW1lLFxuXHRcdFx0cGF5bG9hZCA9IGRhdGEsXG5cdFx0XHR1cmwgPSAhc3RyRmlsZU5hbWUgJiYgIXN0ck1pbWVUeXBlICYmIHBheWxvYWQsXG5cdFx0XHRhbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKSxcblx0XHRcdHRvU3RyaW5nID0gZnVuY3Rpb24oYSl7cmV0dXJuIFN0cmluZyhhKTt9LFxuXHRcdFx0bXlCbG9iID0gKHNlbGYuQmxvYiB8fCBzZWxmLk1vekJsb2IgfHwgc2VsZi5XZWJLaXRCbG9iIHx8IHRvU3RyaW5nKSxcblx0XHRcdGZpbGVOYW1lID0gc3RyRmlsZU5hbWUgfHwgXCJkb3dubG9hZFwiLFxuXHRcdFx0YmxvYixcblx0XHRcdHJlYWRlcjtcblx0XHRcdG15QmxvYj0gbXlCbG9iLmNhbGwgPyBteUJsb2IuYmluZChzZWxmKSA6IEJsb2IgO1xuXHQgIFxuXHRcdGlmKFN0cmluZyh0aGlzKT09PVwidHJ1ZVwiKXsgLy9yZXZlcnNlIGFyZ3VtZW50cywgYWxsb3dpbmcgZG93bmxvYWQuYmluZCh0cnVlLCBcInRleHQveG1sXCIsIFwiZXhwb3J0LnhtbFwiKSB0byBhY3QgYXMgYSBjYWxsYmFja1xuXHRcdFx0cGF5bG9hZD1bcGF5bG9hZCwgbWltZVR5cGVdO1xuXHRcdFx0bWltZVR5cGU9cGF5bG9hZFswXTtcblx0XHRcdHBheWxvYWQ9cGF5bG9hZFsxXTtcblx0XHR9XG5cblxuXHRcdGlmKHVybCAmJiB1cmwubGVuZ3RoPCAyMDQ4KXsgLy8gaWYgbm8gZmlsZW5hbWUgYW5kIG5vIG1pbWUsIGFzc3VtZSBhIHVybCB3YXMgcGFzc2VkIGFzIHRoZSBvbmx5IGFyZ3VtZW50XG5cdFx0XHRmaWxlTmFtZSA9IHVybC5zcGxpdChcIi9cIikucG9wKCkuc3BsaXQoXCI/XCIpWzBdO1xuXHRcdFx0YW5jaG9yLmhyZWYgPSB1cmw7IC8vIGFzc2lnbiBocmVmIHByb3AgdG8gdGVtcCBhbmNob3Jcblx0XHQgIFx0aWYoYW5jaG9yLmhyZWYuaW5kZXhPZih1cmwpICE9PSAtMSl7IC8vIGlmIHRoZSBicm93c2VyIGRldGVybWluZXMgdGhhdCBpdCdzIGEgcG90ZW50aWFsbHkgdmFsaWQgdXJsIHBhdGg6XG4gICAgICAgIFx0XHR2YXIgYWpheD1uZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgXHRcdGFqYXgub3BlbiggXCJHRVRcIiwgdXJsLCB0cnVlKTtcbiAgICAgICAgXHRcdGFqYXgucmVzcG9uc2VUeXBlID0gJ2Jsb2InO1xuICAgICAgICBcdFx0YWpheC5vbmxvYWQ9IGZ1bmN0aW9uKGUpeyBcblx0XHRcdFx0ICBkb3dubG9hZChlLnRhcmdldC5yZXNwb25zZSwgZmlsZU5hbWUsIGRlZmF1bHRNaW1lKTtcblx0XHRcdFx0fTtcbiAgICAgICAgXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgYWpheC5zZW5kKCk7fSwgMCk7IC8vIGFsbG93cyBzZXR0aW5nIGN1c3RvbSBhamF4IGhlYWRlcnMgdXNpbmcgdGhlIHJldHVybjpcblx0XHRcdCAgICByZXR1cm4gYWpheDtcblx0XHRcdH0gLy8gZW5kIGlmIHZhbGlkIHVybD9cblx0XHR9IC8vIGVuZCBpZiB1cmw/XG5cblxuXHRcdC8vZ28gYWhlYWQgYW5kIGRvd25sb2FkIGRhdGFVUkxzIHJpZ2h0IGF3YXlcblx0XHRpZigvXmRhdGE6KFtcXHcrLV0rXFwvW1xcdysuLV0rKT9bLDtdLy50ZXN0KHBheWxvYWQpKXtcblx0XHRcblx0XHRcdGlmKHBheWxvYWQubGVuZ3RoID4gKDEwMjQqMTAyNCoxLjk5OSkgJiYgbXlCbG9iICE9PSB0b1N0cmluZyApe1xuXHRcdFx0XHRwYXlsb2FkPWRhdGFVcmxUb0Jsb2IocGF5bG9hZCk7XG5cdFx0XHRcdG1pbWVUeXBlPXBheWxvYWQudHlwZSB8fCBkZWZhdWx0TWltZTtcblx0XHRcdH1lbHNle1x0XHRcdFxuXHRcdFx0XHRyZXR1cm4gbmF2aWdhdG9yLm1zU2F2ZUJsb2IgPyAgLy8gSUUxMCBjYW4ndCBkbyBhW2Rvd25sb2FkXSwgb25seSBCbG9iczpcblx0XHRcdFx0XHRuYXZpZ2F0b3IubXNTYXZlQmxvYihkYXRhVXJsVG9CbG9iKHBheWxvYWQpLCBmaWxlTmFtZSkgOlxuXHRcdFx0XHRcdHNhdmVyKHBheWxvYWQpIDsgLy8gZXZlcnlvbmUgZWxzZSBjYW4gc2F2ZSBkYXRhVVJMcyB1bi1wcm9jZXNzZWRcblx0XHRcdH1cblx0XHRcdFxuXHRcdH1lbHNley8vbm90IGRhdGEgdXJsLCBpcyBpdCBhIHN0cmluZyB3aXRoIHNwZWNpYWwgbmVlZHM/XG5cdFx0XHRpZigvKFtcXHg4MC1cXHhmZl0pLy50ZXN0KHBheWxvYWQpKXtcdFx0XHQgIFxuXHRcdFx0XHR2YXIgaT0wLCB0ZW1wVWlBcnI9IG5ldyBVaW50OEFycmF5KHBheWxvYWQubGVuZ3RoKSwgbXg9dGVtcFVpQXJyLmxlbmd0aDtcblx0XHRcdFx0Zm9yKGk7aTxteDsrK2kpIHRlbXBVaUFycltpXT0gcGF5bG9hZC5jaGFyQ29kZUF0KGkpO1xuXHRcdFx0IFx0cGF5bG9hZD1uZXcgbXlCbG9iKFt0ZW1wVWlBcnJdLCB7dHlwZTogbWltZVR5cGV9KTtcblx0XHRcdH1cdFx0ICBcblx0XHR9XG5cdFx0YmxvYiA9IHBheWxvYWQgaW5zdGFuY2VvZiBteUJsb2IgP1xuXHRcdFx0cGF5bG9hZCA6XG5cdFx0XHRuZXcgbXlCbG9iKFtwYXlsb2FkXSwge3R5cGU6IG1pbWVUeXBlfSkgO1xuXG5cblx0XHRmdW5jdGlvbiBkYXRhVXJsVG9CbG9iKHN0clVybCkge1xuXHRcdFx0dmFyIHBhcnRzPSBzdHJVcmwuc3BsaXQoL1s6OyxdLyksXG5cdFx0XHR0eXBlPSBwYXJ0c1sxXSxcblx0XHRcdGRlY29kZXI9IHBhcnRzWzJdID09IFwiYmFzZTY0XCIgPyBhdG9iIDogZGVjb2RlVVJJQ29tcG9uZW50LFxuXHRcdFx0YmluRGF0YT0gZGVjb2RlciggcGFydHMucG9wKCkgKSxcblx0XHRcdG14PSBiaW5EYXRhLmxlbmd0aCxcblx0XHRcdGk9IDAsXG5cdFx0XHR1aUFycj0gbmV3IFVpbnQ4QXJyYXkobXgpO1xuXG5cdFx0XHRmb3IoaTtpPG14OysraSkgdWlBcnJbaV09IGJpbkRhdGEuY2hhckNvZGVBdChpKTtcblxuXHRcdFx0cmV0dXJuIG5ldyBteUJsb2IoW3VpQXJyXSwge3R5cGU6IHR5cGV9KTtcblx0XHQgfVxuXG5cdFx0ZnVuY3Rpb24gc2F2ZXIodXJsLCB3aW5Nb2RlKXtcblxuXHRcdFx0aWYgKCdkb3dubG9hZCcgaW4gYW5jaG9yKSB7IC8vaHRtbDUgQVtkb3dubG9hZF1cblx0XHRcdFx0YW5jaG9yLmhyZWYgPSB1cmw7XG5cdFx0XHRcdGFuY2hvci5zZXRBdHRyaWJ1dGUoXCJkb3dubG9hZFwiLCBmaWxlTmFtZSk7XG5cdFx0XHRcdGFuY2hvci5jbGFzc05hbWUgPSBcImRvd25sb2FkLWpzLWxpbmtcIjtcblx0XHRcdFx0YW5jaG9yLmlubmVySFRNTCA9IFwiZG93bmxvYWRpbmcuLi5cIjtcblx0XHRcdFx0YW5jaG9yLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblx0XHRcdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhbmNob3IpO1xuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGFuY2hvci5jbGljaygpO1xuXHRcdFx0XHRcdGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYW5jaG9yKTtcblx0XHRcdFx0XHRpZih3aW5Nb2RlPT09dHJ1ZSl7c2V0VGltZW91dChmdW5jdGlvbigpeyBzZWxmLlVSTC5yZXZva2VPYmplY3RVUkwoYW5jaG9yLmhyZWYpO30sIDI1MCApO31cblx0XHRcdFx0fSwgNjYpO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gaGFuZGxlIG5vbi1hW2Rvd25sb2FkXSBzYWZhcmkgYXMgYmVzdCB3ZSBjYW46XG5cdFx0XHRpZigvKFZlcnNpb24pXFwvKFxcZCspXFwuKFxcZCspKD86XFwuKFxcZCspKT8uKlNhZmFyaVxcLy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkge1xuXHRcdFx0XHRpZigvXmRhdGE6Ly50ZXN0KHVybCkpXHR1cmw9XCJkYXRhOlwiK3VybC5yZXBsYWNlKC9eZGF0YTooW1xcd1xcL1xcLVxcK10rKS8sIGRlZmF1bHRNaW1lKTtcblx0XHRcdFx0aWYoIXdpbmRvdy5vcGVuKHVybCkpeyAvLyBwb3B1cCBibG9ja2VkLCBvZmZlciBkaXJlY3QgZG93bmxvYWQ6XG5cdFx0XHRcdFx0aWYoY29uZmlybShcIkRpc3BsYXlpbmcgTmV3IERvY3VtZW50XFxuXFxuVXNlIFNhdmUgQXMuLi4gdG8gZG93bmxvYWQsIHRoZW4gY2xpY2sgYmFjayB0byByZXR1cm4gdG8gdGhpcyBwYWdlLlwiKSl7IGxvY2F0aW9uLmhyZWY9dXJsOyB9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vZG8gaWZyYW1lIGRhdGFVUkwgZG93bmxvYWQgKG9sZCBjaCtGRik6XG5cdFx0XHR2YXIgZiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XG5cdFx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGYpO1xuXG5cdFx0XHRpZighd2luTW9kZSAmJiAvXmRhdGE6Ly50ZXN0KHVybCkpeyAvLyBmb3JjZSBhIG1pbWUgdGhhdCB3aWxsIGRvd25sb2FkOlxuXHRcdFx0XHR1cmw9XCJkYXRhOlwiK3VybC5yZXBsYWNlKC9eZGF0YTooW1xcd1xcL1xcLVxcK10rKS8sIGRlZmF1bHRNaW1lKTtcblx0XHRcdH1cblx0XHRcdGYuc3JjPXVybDtcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChmKTsgfSwgMzMzKTtcblxuXHRcdH0vL2VuZCBzYXZlclxuXG5cblxuXG5cdFx0aWYgKG5hdmlnYXRvci5tc1NhdmVCbG9iKSB7IC8vIElFMTArIDogKGhhcyBCbG9iLCBidXQgbm90IGFbZG93bmxvYWRdIG9yIFVSTClcblx0XHRcdHJldHVybiBuYXZpZ2F0b3IubXNTYXZlQmxvYihibG9iLCBmaWxlTmFtZSk7XG5cdFx0fVxuXG5cdFx0aWYoc2VsZi5VUkwpeyAvLyBzaW1wbGUgZmFzdCBhbmQgbW9kZXJuIHdheSB1c2luZyBCbG9iIGFuZCBVUkw6XG5cdFx0XHRzYXZlcihzZWxmLlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYiksIHRydWUpO1xuXHRcdH1lbHNle1xuXHRcdFx0Ly8gaGFuZGxlIG5vbi1CbG9iKCkrbm9uLVVSTCBicm93c2Vyczpcblx0XHRcdGlmKHR5cGVvZiBibG9iID09PSBcInN0cmluZ1wiIHx8IGJsb2IuY29uc3RydWN0b3I9PT10b1N0cmluZyApe1xuXHRcdFx0XHR0cnl7XG5cdFx0XHRcdFx0cmV0dXJuIHNhdmVyKCBcImRhdGE6XCIgKyAgbWltZVR5cGUgICArIFwiO2Jhc2U2NCxcIiAgKyAgc2VsZi5idG9hKGJsb2IpICApO1xuXHRcdFx0XHR9Y2F0Y2goeSl7XG5cdFx0XHRcdFx0cmV0dXJuIHNhdmVyKCBcImRhdGE6XCIgKyAgbWltZVR5cGUgICArIFwiLFwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGJsb2IpICApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIEJsb2IgYnV0IG5vdCBVUkwgc3VwcG9ydDpcblx0XHRcdHJlYWRlcj1uZXcgRmlsZVJlYWRlcigpO1xuXHRcdFx0cmVhZGVyLm9ubG9hZD1mdW5jdGlvbihlKXtcblx0XHRcdFx0c2F2ZXIodGhpcy5yZXN1bHQpO1xuXHRcdFx0fTtcblx0XHRcdHJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpO1xuXHRcdH1cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fTsgLyogZW5kIGRvd25sb2FkKCkgKi9cbn0pKTtcbiJdfQ=="}