!function r(a,s,l){function c(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var o=s[t]={exports:{}};a[t][0].call(o.exports,function(e){return c(a[t][1][e]||e)},o,o.exports,r,a,s,l)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,n){"use strict";var i,o=(i=e("./modules/img-extractor.js"))&&i.__esModule?i:{default:i};window.imgExtractor=new o.default({rename:{}}),console.log(imgExtractor)},{"./modules/img-extractor.js":4}],2:[function(e,t,n){"use strict";var i,o=(i=e("./modules/extend"))&&i.__esModule?i:{default:i};function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.elems_selector=[],this.scoped_elems=[],this.scoped=!1,this.style_obj={},this.scopedId="",this.style_string="",this.indent=4,this.Extend=o.default,this.init(e.scopedElem,e.style)}var e,n,i;return e=t,(n=[{key:"rand",value:function(e,t){var n=Math.floor(e+Math.random()*(t+1-e));return n}},{key:"camelToKebab",value:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}},{key:"extend",value:function(e,t){return this.style_obj=this.Extend(e,t),this.style_string=this.jsonToStyle(this.style_obj,this.scopedId),this.updateStyleInject(this.style_string,this.scopedId),this.style_string}},{key:"updateStyleInject",value:function(e,t){document.querySelector("#".concat(t)).textContent=e}},{key:"removeStyle",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.head,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.scopedId,n=document.querySelector("#".concat(t));return!!n&&(e.removeChild(n),this.scoped_elems.forEach(function(e){return e.removeAttribute("data-scoped")}),!0)}},{key:"addStyle",value:function(){return!document.querySelector("#".concat(this.scopedId))&&(this.injectStyle(this.style_string,document.head,"CSSinJSON_style",this.scopedId),this.addScopedAttr(this.scoped_elems),!0)}},{key:"injectStyle",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.style_string,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.head,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"CSSinJSON_style",i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this.scopedId,o=document.createElement("style");o.id=i,o.className=n,o.textContent=e,t.appendChild(o)}},{key:"prepareSelector",value:function(e){return e.replace(/([\.\#])/gim,"\\$1")}},{key:"scopeSelector",value:function(e,t,n){if(e===this.prepareSelector(e)&&"body"!==t)return"".concat(n," ").concat(t);if("body"===t)return t;for(var i,o,r,a,s="(?:^|[^\\ \\t])(".concat(this.prepareSelector(e),")(?=$|[\\s\\.\\#>])"),l=new RegExp(s,"gm");null!==(i=l.exec(t));)i.index===l.lastIndex&&l.lastIndex++,i.slice(),a=l.lastIndex,o=t.slice(0,l.lastIndex-i[1].length),r=t.slice(l.lastIndex),t=o+i[1].replace(l,"$1"+n)+r,l.lastIndex+=n.length;return t=void 0===a?"".concat(n," ").concat(t):t}},{key:"scopedSelectorGenerate",value:function(e){var o=this,t=/(,\s*\n*\t*)/gm,n=e.split(t).filter(function(e){return-1===e.search(t)}),r="[data-scoped=".concat(this.scopedId,"]"),a="";return n.forEach(function(n){if(o.scoped){var i="";o.elems_selector.forEach(function(e){var t;t=o.scopeSelector(e,n,r)+",\n",i!==t&&(a+=t,i=t)})}else a+="".concat(n,",\n")}),a.slice(0,-2)}},{key:"objToStyle",value:function(e,t){var n="";for(var i in t)n+="\n".concat(" ".repeat(this.indent)).concat(this.camelToKebab(i),": ").concat(t[i],";");return"".concat(this.scopedSelectorGenerate(e)," {").concat(n,"\n}")}},{key:"jsonToStyle",value:function(e){var t="";for(var n in e)t+=this.objToStyle(n,e[n])+"\n\n";return t}},{key:"addScopedAttr",value:function(e){var t=this;e.forEach(function(e){return e.dataset.scoped=t.scopedId})}},{key:"findScopedElems",value:function(e){var t,n=this;"object"===r(e)?e.forEach(function(e){n.elems_selector.push(e),null!==(t=document.querySelectorAll(e))&&t.forEach(function(e){n.scoped_elems.push(e)})}):"string"==typeof e&&(this.elems_selector.push(e),null!==(t=document.querySelectorAll(e))&&t.forEach(function(e){n.scoped_elems.push(e)}))}},{key:"scopedInit",value:function(e){this.findScopedElems(e),0<this.scoped_elems.length&&(this.scoped=!0,this.addScopedAttr(this.scoped_elems))}},{key:"scopedIdGenerate",value:function(){for(var e="",t=0;t<10;t++)e+=String.fromCharCode(this.rand(97,122));return e}},{key:"prepareStyle",value:function(e){if("string"==typeof e)try{this.style_obj=JSON.parse(e)}catch(e){console.error("CSSinJSON: JSON.parse(style) error")}else"object"===r(e)&&(this.style_obj=e)}},{key:"init",value:function(e,t){this.prepareStyle(t),this.scopedId=this.scopedIdGenerate(),this.scopedInit(e),this.style_string=this.jsonToStyle(this.style_obj),this.injectStyle(this.style_string,document.head,"CSSinJSON_style",this.scopedId)}}])&&a(e.prototype,n),i&&a(e,i),t}();window.CSSinJSON=s},{"./modules/extend":3}],3:[function(e,t,n){"use strict";function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){var t,n,i,o,r,a,s=arguments[0]||{},l=1,c=arguments.length,u=!1;"boolean"==typeof s&&(u=s,s=arguments[l]||{},l++);"object"===f(s)||isFunction(s)||(s={});l===c&&(s=this,l--);for(;l<c;l++)if(null!=(t=arguments[l]))for(n in t)i=s[n],o=t[n],s!==o&&(u&&o&&(d(o)||(r=Array.isArray(o)))?(a=r?(r=!1,i&&Array.isArray(i)?i:[]):i&&d(i)?i:{},s[n]=e(u,a,o)):void 0!==o&&(s[n]=o));function d(e){var t,n;return!(!e||"[object Object]"!==toString.call(e))&&(!(t=i(e))||"function"==typeof(n=o.call(t,"constructor")&&t.constructor)&&r.call(n)===ObjectFunctionString);function i(e){return(e=e||{}).getPrototypeOf}function o(e){return e.hasOwnProperty}function r(e){return e.toString}}return s}},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(e("downloadjs")),r=i(e("./interface"));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e.container?document.querySelector(e.container):document,this.name_prefix=e.rename&&e.rename.prefix?e.rename.prefix:"",this.name_suffix=e.rename&&e.rename.suffix?e.rename.suffix:"",this.default_name_ext="svg",this.name_index=0,this.autodownload=e.autodownload,this.elems={},this.items=[],this.mime_type={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",tiff:"image/tiff",webp:"image/webp"},this.interface=null,this.init()}var e,n,i;return e=t,(n=[{key:"_getTypeFilter",value:function(){var e={};for(var t in this.elems)e[t]=!0;return e}},{key:"_buildName",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.default_name_ext,n="";return n=e.id?e.id:""!==e.classList.value?e.classList.value:this.name_index++,"".concat(this.name_prefix).concat(n).concat(this.name_suffix,".").concat(t)}},{key:"_collectInlineSvg",value:function(){var n=this,i="svg";this.elems.svg=this.container.querySelectorAll("svg"),this.elems.svg.forEach(function(e){var t={};t.name=n._buildName(e,i),t.content=e.outerHTML,t.ext=i,n.items.push(t)})}},{key:"downloadAll",value:function(){var t=this;this.items.forEach(function(e){(0,o.default)(e.content,e.name,t.mime_type[e.ext])})}},{key:"getElements",value:function(){return this.elems}},{key:"getItems",value:function(){return this.items}},{key:"init",value:function(){this._collectInlineSvg(),this.autodownload?this.downloadAll():(this.interface=new r.default({layout_id:"img_extractor_interface",items:this.getItems(),filter:this._getTypeFilter()}),console.log(this.interface))}}])&&a(e.prototype,n),i&&a(e,i),t}();n.default=s},{"./interface":6,downloadjs:7}],5:[function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){function e(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.colors={bg_container:"rgba(0, 0, 0, .7)",text:"rgb(195, 207, 224)",border:"rgba(105, 109, 125, 0.4)",accent:"#ffc000",accent_alfa:"rgba(255, 192, 0, .3)"}}var t,n,i;return t=e,(n=[{key:"getLayoutTemplate",value:function(){return'\n            <div class="interface_header">\n                <div class="interface_hide" title="Свернуть панель скачивания">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="'.concat(this.colors.text,'" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                        <line x1="4" y1="12" x2="20" y2="12"/>\n                        <polyline points="14 6 20 12 14 18"/>\n                    </svg>\n                </div>\n                <div class="header_text">Выберите изображения для скачивания</div>\n            </div>\n            \n            <div class="interface_content"></div>')}},{key:"getIcons",value:function(){}},{key:"getFilterBtnTemplate",value:function(e){var t=document.createElement("div");return t.className="filter_btn active",t.dataset.filter=e,t.textContent=".".concat(e),t}},{key:"getListItem",value:function(e){return"<div>".concat(e.name,"</div>")}},{key:"getCommonStyle",value:function(e){var t;return o(t={},e.layout_id,{backgroundColor:this.colors.bg_container,boxShadow:"0 0 20px ".concat(this.colors.bg_container),color:this.colors.text,fontFamily:"sans-serif",position:"fixed",maxWidth:"500px",minWidth:"320px",width:"40%",height:"100vh",boxSizing:"border-box",right:0,top:0,padding:"10px 15px",transform:"translate3d(0, 0, 1px)",willChange:"transform",transition:"all .25s ease-in-out"}),o(t,"".concat(e.layout_id,".close"),{transform:"translate3d(100%, 0, 1px)",boxShadow:"none"}),o(t,".interface_header",{display:"flex",borderBottom:"1px solid "+this.colors.border,marginBottom:"10px"}),o(t,".interface_hide",{padding:"10px",width:"28px",display:"flex",justifyContent:"center",cursor:"pointer",transition:"transform .25s ease-in-out"}),o(t,".interface_hide svg",{transition:"transform .25s ease-in-out"}),o(t,".interface_hide:hover svg",{stroke:"#fff"}),o(t,"".concat(e.layout_id,".close .interface_hide"),{"background-color":this.colors.bg_container,"border-radius":"5px 0 0 5px",transform:"translate3d(calc(-100% - 15px), 0, 1px)"}),o(t,"".concat(e.layout_id,".close .interface_hide svg"),{transform:"rotate(180deg)"}),o(t,".header_text",{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"space-around"}),o(t,".interface_content",{overflowY:"auto"}),o(t,".filter_wrap",{display:"flex",justifyContent:"space-between",marginBottom:"10px"}),o(t,".filter_btn",{border:"1px solid",borderColor:this.colors.border,borderRadius:"2px",padding:"5px 10px",cursor:"pointer",opacity:.8,userSelect:"none"}),o(t,".filter_btn.active",{borderColor:this.colors.accent,color:this.colors.accent}),o(t,".list_item",{border:"1px solid",borderColor:"transparent",borderRadius:"3px",padding:"15px",marginBottom:"5px",backgroundColor:this.colors.bg_container,cursor:"pointer",opacity:.5}),o(t,".list_item".concat(e.list_item_slected),{borderColor:this.colors.border,opacity:1}),t}}])&&r(t.prototype,n),i&&r(t,i),e}();n.default=i},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("../libs/CSSinJSON/app/js/css-in-json");var i,o=(i=e("./interface-templates"))&&i.__esModule?i:{default:i};function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=this;this.layout_id=e.layout_id,this.items=e.items,this._filter=e.filter,this.parts={layout:null,header:null,content:null,filter:null,list:null},this.list_item_slected="selected",this.cssinjs=null,this.template=new o.default,this.state={_opened:!0,set opened(e){"boolean"==typeof e&&(this._opened=e,t.parts.layout&&(e?t.parts.layout.classList.remove("close"):t.parts.layout.classList.add("close")))},get opened(){return this._opened}},this.init()}var e,t,i;return e=n,(t=[{key:"_handlerListItemSelect",value:function(e){e.classList.toggle(this.list_item_slected)}},{key:"_makeList",value:function(){this.parts.list=document.createElement("div"),this.parts.list.className="list_wrap",this.parts.content.appendChild(this.parts.list)}},{key:"_renderListItems",value:function(t){var n=this;this.items.filter(function(e){return e.ext===t}).forEach(function(e){var t=document.createElement("div");t.className="list_item ".concat(n.list_item_slected),t.innerHTML=n.template.getListItem(e),t.addEventListener("click",function(e){n._handlerListItemSelect(e.currentTarget)}),n.parts.list.appendChild(t)})}},{key:"_clearListItems",value:function(){this.parts.list.innerHTML=""}},{key:"listRender",value:function(e){if((!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&this._clearListItems(),e&&this._filter[e])this._renderListItems(e);else if(!e)for(var t in this._clearListItems(),this._filter)this._filter[t]&&this._renderListItems(t)}},{key:"_makeFilter",value:function(){var n=this;for(var e in this.parts.filter=document.createElement("div"),this.parts.filter.className="filter_wrap",this._filter){var t=this.template.getFilterBtnTemplate(e);t.addEventListener("click",function(e){var t=e.currentTarget;n.filter(t.dataset.filter)?t.classList.add("active"):t.classList.remove("active")}),this.parts.filter.appendChild(t)}this.parts.content.appendChild(this.parts.filter)}},{key:"filter",value:function(e,t){return t&&"boolean"==typeof t?this._filter[e]=t:void 0===t&&(this._filter[e]=!this._filter[e]),this.listRender(),this._filter[e]}},{key:"openToggle",value:function(e){this.state.opened=!this.state.opened,e&&this.state.opened?e.currentTarget.setAttribute("title","Свернуть ImgExtractor"):e&&!this.state.opened&&e.currentTarget.setAttribute("title","Развернуть ImgExtractor")}},{key:"_makeLayout",value:function(){var t=this;this.parts.layout=document.createElement("div"),this.parts.layout.id=this.layout_id,this.parts.layout.innerHTML=this.template.getLayoutTemplate(),this.parts.header=this.parts.layout.querySelector(".interface_header"),this.parts.content=this.parts.layout.querySelector(".interface_content"),this.parts.layout.querySelector(".interface_hide").addEventListener("click",function(e){t.openToggle(e)}),document.body.appendChild(this.parts.layout)}},{key:"init",value:function(){this._makeLayout(),this._makeFilter(),this._makeList(),this.listRender(),this.cssinjs=new CSSinJSON({style:this.template.getCommonStyle({layout_id:"#"+this.layout_id,list_item_slected:"."+this.list_item_slected}),scopedElem:"#"+this.layout_id})}}])&&r(e.prototype,t),i&&r(e,i),n}();n.default=a},{"../libs/CSSinJSON/app/js/css-in-json":2,"./interface-templates":5}],7:[function(e,t,n){var i,o;i=this,o=function(){return function t(e,n,i){var o,r,a=window,s="application/octet-stream",l=i||s,c=e,u=!n&&!i&&c,d=document.createElement("a"),f=function(e){return String(e)},h=a.Blob||a.MozBlob||a.WebKitBlob||f,p=n||"download";if(h=h.call?h.bind(a):Blob,"true"===String(this)&&(l=(c=[c,l])[0],c=c[1]),u&&u.length<2048&&(p=u.split("/").pop().split("?")[0],d.href=u,-1!==d.href.indexOf(u))){var m=new XMLHttpRequest;return m.open("GET",u,!0),m.responseType="blob",m.onload=function(e){t(e.target.response,p,s)},setTimeout(function(){m.send()},0),m}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(c)){if(!(2096103.424<c.length&&h!==f))return navigator.msSaveBlob?navigator.msSaveBlob(_(c),p):b(c);l=(c=_(c)).type||s}else if(/([\x80-\xff])/.test(c)){for(var y=0,v=new Uint8Array(c.length),g=v.length;y<g;++y)v[y]=c.charCodeAt(y);c=new h([v],{type:l})}function _(e){for(var t=e.split(/[:;,]/),n=t[1],i=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),o=i.length,r=0,a=new Uint8Array(o);r<o;++r)a[r]=i.charCodeAt(r);return new h([a],{type:n})}function b(e,t){if("download"in d)return d.href=e,d.setAttribute("download",p),d.className="download-js-link",d.innerHTML="downloading...",d.style.display="none",document.body.appendChild(d),setTimeout(function(){d.click(),document.body.removeChild(d),!0===t&&setTimeout(function(){a.URL.revokeObjectURL(d.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),n.src=e,setTimeout(function(){document.body.removeChild(n)},333)}if(o=c instanceof h?c:new h([c],{type:l}),navigator.msSaveBlob)return navigator.msSaveBlob(o,p);if(a.URL)b(a.URL.createObjectURL(o),!0);else{if("string"==typeof o||o.constructor===f)try{return b("data:"+l+";base64,"+a.btoa(o))}catch(e){return b("data:"+l+","+encodeURIComponent(o))}(r=new FileReader).onload=function(e){b(this.result)},r.readAsDataURL(o)}return!0}},"function"==typeof define&&define.amd?define([],o):"object"==typeof n?t.exports=o():i.download=o()},{}]},{},[1]);